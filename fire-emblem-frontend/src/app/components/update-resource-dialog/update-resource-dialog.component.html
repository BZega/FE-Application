<h2 mat-dialog-title>
  {{ data.type === 'gold' ? 'Update Gold' : 'Update Experience' }}
</h2>

<mat-dialog-content>
  <div class="resource-info">
    <div class="current-value">
      <span class="label">Current:</span>
      <span class="value">{{ currentValue }}</span>
    </div>
    
    <mat-form-field appearance="outline">
      <mat-label>Amount to Add</mat-label>
      <input matInput type="number" [(ngModel)]="amountToAdd" (ngModelChange)="onAmountChange()" min="0">
    </mat-form-field>

    <div class="new-total">
      <span class="label">New Total:</span>
      <span class="value">{{ newTotal }}</span>
    </div>
  </div>

  <div *ngIf="data.type === 'exp'" class="exp-options">
    <mat-checkbox [(ngModel)]="manualLevelUp" (change)="onManualLevelUpChange()">
      Manual Level Up
    </mat-checkbox>

    <div *ngIf="manualLevelUp && pendingLevelUps.length > 0" class="level-ups-container">
      <div *ngFor="let levelUp of pendingLevelUps" class="level-up-section">
        <h3>Level {{ levelUp.level - 1 }} â†’ {{ levelUp.level }} Stat Increases</h3>
        <div class="stat-grid">
          <div *ngFor="let stat of statKeys" class="stat-checkbox">
            <mat-checkbox [(ngModel)]="levelUp.stats[stat]">
              {{ stat | uppercase }}
            </mat-checkbox>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="hasAbilityToAcquire" class="ability-acquisition">
      <h3>Ability Acquired!</h3>
      
      <mat-form-field appearance="outline" *ngIf="availableAbilities.length > 1">
        <mat-label>Select Ability</mat-label>
        <mat-select [(ngModel)]="selectedAbilityId">
          <mat-option *ngFor="let ability of availableAbilities" [value]="ability.id">
            {{ ability.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div *ngIf="availableAbilities.length === 1" class="single-ability">
        <strong>{{ availableAbilities[0].name }}</strong>
        <p>{{ availableAbilities[0].description }}</p>
      </div>

      <mat-checkbox 
        [(ngModel)]="equipAbility" 
        [disabled]="!canEquipAbility"
        [matTooltip]="!canEquipAbility ? 'Cannot equip - maximum of 5 abilities already equipped' : ''">
        Equip Ability
      </mat-checkbox>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Cancel</button>
  <button mat-raised-button color="primary" (click)="onConfirm()">Confirm</button>
</mat-dialog-actions>
